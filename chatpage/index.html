<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FEIN-Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link href="https://fonts.googleapis.com/css?family=DM+Sans:400,500,700&display=swap" rel="stylesheet" />
</head>
<body>
  <div class="container">

    <!-- Sidebar -->
<aside class="sidebar" id="sidebar">
  <!-- Header Row with New Chat + Close -->
  <div class="sidebar-header">
    <button class="new-chat-btn" onclick="startNewChat()">
      <i class="ph ph-plus-circle"></i> New Chat
    </button>
    <button class="sidebar-close-btn" onclick="toggleSidebar()" aria-label="Close Sidebar">
      <i class="ph ph-x"></i>
    </button>
  </div>

  <!-- Divider -->
  <hr class="sidebar-divider" />

  <!-- Chat History List -->
  <div id="historyList" class="history-list"></div>
</aside>



    <!-- Main Chat Area -->
    <main class="main">
      <!-- Topbar -->
<div class="topbar">
  <button class="menu-toggle" onclick="toggleSidebar()" aria-label="Toggle Sidebar">
    <i class="ph ph-list"></i>
  </button>
  <span class="fein-ai-title">FEIN</span>

         <button class="profile-button" onclick="toggleProfileMenu()" title="User Profile">
          <img src="https://i.pravatar.cc/150?img=12" alt="User" />
        </button>
      </div>

      <!-- Welcome Section -->
      <section class="welcome-section" id="welcomeSection">
        <h1>Welcome, what can I do for you?</h1>
        <p>I am an AI model and may make mistakes. Please make finance-related decisions mindfully and wisely.</p>
      </section>

      <!-- Chat Window -->
      <div class="chat-window" id="chatWindow"></div>

      <!-- Chat Input -->
      <form class="chat-input" onsubmit="sendMessage(); return false;">
        <div class="input-with-buttons">
          <button type="button" title="Add media"><i class="ph ph-plus"></i></button>
          <input type="text" id="userInput" placeholder="Type a message..." />
          <button type="button" title="Suggestions or threads" onclick="startVoice()"><i class="ph ph-waveform"></i></button>
        </div>
        <button type="submit" title="Send message"><i class="ph ph-paper-plane-right"></i></button>
      </form>
    </main>
  </div>

  <!-- Profile Menu (Desktop) -->
  <div id="profileMenu" class="profile-menu">
    <div class="email">you@example.com</div>
    <button>Upgrade Plan</button>
    <button>Customize FEIN AI</button>
    <button onclick="openSettings()">Settings</button>
    <button>Keyboard Shortcuts</button>
    <a href="#"><i class="ph ph-link"></i> Help & FAQ</a>
    <a href="#"><i class="ph ph-link"></i> Release Notes</a>
    <a href="#"><i class="ph ph-link"></i> Terms & Policies</a>
    <button style="color: #e53935;"><b>Log Out</b></button>
  </div>

  <!-- Profile Menu (Mobile) -->
  <div id="mobileProfileMenu" class="mobile-profile-menu">
    <button class="close-btn" onclick="closeMobileMenu()">&times;</button>
    <h2>you@example.com</h2>
    <button>Upgrade Plan</button>
    <button>Customize FEIN AI</button>
    <button onclick="openSettings()">Settings</button>
    <button>Keyboard Shortcuts</button>
    <a href="#"><i class="ph ph-link"></i> Help & FAQ</a>
    <a href="#"><i class="ph ph-link"></i> Release Notes</a>
    <a href="#"><i class="ph ph-link"></i> Terms & Policies</a>
    <button><b>Log Out</b></button>
  </div>

  <!-- Settings Panel -->
  <div id="settingsOverlay" class="settings-overlay">
    <div class="settings-container">
      <div class="settings-header">
        <h2>Settings</h2>
        <button class="settings-close" onclick="closeSettings()">&times;</button>
      </div>
      <div class="settings-content">
        <ul class="settings-sections">
          <li onclick="openSettingSection('general')">General</li>
          <li onclick="openSettingSection('notifications')">Notifications</li>
          <li onclick="openSettingSection('personalization')">Personalization</li>
          <li onclick="openSettingSection('speech')">Speech</li>
          <li onclick="openSettingSection('data')">Data controls</li>
          <li onclick="openSettingSection('builder')">Builder profile</li>
          <li onclick="openSettingSection('apps')">Connected apps</li>
          <li onclick="openSettingSection('security')">Secure sign in</li>
        </ul>
        <div id="settingDetails" class="setting-details">
          <p>Select a setting to view details.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Waveform Overlay -->
  <div id="voiceModal" class="voice-modal">
    <canvas id="waveformCanvas"></canvas>
    <div class="voice-controls">
      <button id="holdButton" onclick="toggleHold()" title="Hold / Unhold">
        <i class="ph ph-pause"></i>
      </button>
      <button id="micButton" onclick="toggleMic()" title="Mic On / Off">
        <i class="ph ph-microphone"></i>
      </button>
      <div class="dropdown">
        <button id="speakerButton" onclick="toggleSpeakerDropdown()" title="Speaker Options">
          <i class="ph ph-speaker-high"></i>
        </button>
        <div id="speakerDropdown" class="dropdown-content">
          <a href="#">Speaker</a>
          <a href="#">Bluetooth</a>
          <a href="#">Call</a>
        </div>
      </div>
    </div>
    <button onclick="stopVoice()" class="stop-btn"><i class="ph ph-x"></i></button>
  </div>

  <!-- JS entrypoint -->
  <script type="module" src="./app.js"></script>
</body>
</html>
